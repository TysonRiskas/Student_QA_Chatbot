•	Homework Details:
o	Title: Assignment 10: The Great Database Migration
o	Overview: This is a significant refactoring challenge. Your task is to upgrade your application's backend from a simple JSON file to a robust SQLite database, managed by the SQLAlchemy ORM. (you can use another if you have a preference) 
o	Technical Challenge Requirements: You must overhaul your application's data layer. Define a SQLAlchemy model that represents a single item in your application. Configure your Flask application to connect to an SQLite database. Modify the "add item" functionality to create an instance of your SQLAlchemy model and commit it to the database session. Modify the "list items" functionality to query the database using SQLAlchemy.
o	Deliverables:
	Your updated Flask application script (web_app.py).
	Any new Python files containing your database models.
	The SQLite database file (e.g., project.db).

 All right, I hope you are ready for the next step. So as of right now, I feel we have a program that is actually looking really good and performing really well. So I've been really pleased with GitHub Copilot as our AI development tool. I think it's been working fantastic and I'm excited to kind of do the next steps. We haven't had to do a lot of debugging, which has been fortunate and actually, and I think it probably shows how far the AI has come since when I first started doing this because I would have to have, you know, three or four different large language models pulled up and I'd be going back and forth between all four of them to be able to help me create the program that I want and debugging and whatnot. So this has been pretty smooth. I think a big reason for that as well is our documentation a lot of times and the first time i started using this or before i started using this i had a lot more debugging that i'd have to do but breaking it up into chunks like this having the general overview has made the process a whole lot smoother so um yeah so let's go ahead and go into um chunk number six chunk six okay so what we're going to be doing now is we need to do, let's see, data migration. So migration. Okay, good. So what's going on here is right now it is creating a dictionary list and saving all the data that way. This is fine for now, but what we really want to do is we want to migrate this data to a database. That just make it so it can scale a lot better the data will be a lot cleaner and more accessible all in all it's just going to be a better option as we scale this and so our goal here is that we want want to let's see oh yeah I just to make sure yeah we want to um refactor um the applications back end um back end from a simple json file which is what we have which is fine It's kind of like using an Excel file, no big deal. But we want to make it a more robust database, okay? Here's the question. So in the homework, I put SQLite database. It's managed by SQLAlchemy. but I also put, if you have another preference, I'm going to put this into a robust database and I'm going to leave it as database. I'm going to put, how about this? SQL database. Okay. I'm going to leave it at that. So let's see. Yeah. So that's really the goal of this. So let's go ahead and break down some tasks and I'm going to put some information in the notes tasks let's go ahead and do this task number one we need to need to I'm going to do this. Replace the JSON file data storage to a SQL database. Simple as that that's the task let's do I'm just trying to think so we have a login for users I can check everything on the back end create a user or a admin a straighter friendly way to access the database okay let's do core and our core For files, let's do the first one, database models, or, oops, oops, okay, and then the database file project DB. Okay. Now let's do our notes. Notes. So with notes with the application I want to have the most seamless SQL database experience. I am planning on initially launching with Heroku, choose the database system that will integrate best with Heroku and allow for eventual migration to AWS okay I think that looks pretty good so let's go ahead and copy this let's go over to our cursor let's go back to our github copilot chat that we have here and i am just going to go ahead and paste press enter and let's have it work its magic now it's reading our web application it's reading requirements text uh perfect for hiroku deployment eventual aws migration uh post uh PostgreSQL, Postgres, yeah, Postgres, I think, is the best choice. Heroku provides free Progres adds-on and AWS RDS supports Postgres seamlessly. I'll use SQLAlchemy as the ORM for database agnostic code and FlaskMigrate for schema migrations. Perfect. So I'm happy with that choice. It tells me why it's using it. Me personally, I'm not too biased about what SQL might use, so I'm happy with that. It's created a database model and migration system. So we're creating the models.py and create a database.py and we're going to create an admin panel for easy database access, which is I think what I added is far as as one of my tasks which is good okay so now it's entering that so what we've started with right let's kind of rehash everything that we've done we started off with generating the idea what can we do to help augment or automate kind of the work that we're doing and we you know looked at the custom GPT to be able to assess that. And now we're going through and saying, okay, let's create a prototype that works within the command line. Now we're going to take that, add some simple database functions with the JSON files and whatnot. And then we're going to take that over and say, okay, let's create a better user interface and create a Flask or a website where we can access this chatbot. And then from there we're saying, okay, well, let's enhance the user experience and make that one where you as the back-end administrator can gather data on the users that are using it and you can also create a login where you can have a more customized experience so that's where we've taken it so far now we're saying well crap let's make this a little bit more robust let's go ahead and get a actual database connected to this and that will help us with enlarging this and scaling this so that's kind of where we're at now so let's see let me create a new version of the web app that uses sql database i'll create new files first so what is so great about this is um one we're doing it incrementally but two we built it simply and then we don't have to go back and um do a lot of like you know removing and replacing where a lot of errors can come in in the human level you can see here it's now creating um it's reading the app it's migrating things it's replacing you know the the json file with the database file it's just so smooth and seamless it's great um create an admin uh admin template directory yeah let's i feel good about that okay so this will keep going um and so then where we're really going to go from here at from this point is we're going to do this migration we want to make sure that it works well we've set up an element where we can create an update information for our database but we're going to want to make sure that we can also replace and delete as well so or what we have we have create and read sorry and we want to add update and delete this is called crud and this is uh so create read update and delete and so this really um makes i guess the goal of this is to um strengthen your uh strengthening your database okay and your ability to manipulate it right so yeah so that's basically what we're going to be doing and then from there we're getting close to the end we're going to update some security and then we're going to create an API so you can connect to this okay so now it's creating a summary of chunk six implementing the sql database migration and then it is doing all of this work man this is so cool from where we started to where we're going now and really so i haven't updated or put anything into my corpus yet so right now it's still using minstrel um as the data that's pulling from but eventually I'll start adding more stuff into the corpus and then we'll have a really cool little chat bot that's working here and then those files if I go to my files folder and I go to cursor I go to my chat bot and then I go to my corpus i can just upload those files directly here and um yeah that should work pretty seamlessly okay and this is wigging out again i'm gonna go ahead and go away from that at the moment okay so yeah so let's go ahead and say look and see what we did perfect now let's create a quick start guide there's a quick start guide for all of this three main tables we have users conversations and admin users I'm great with those tables let's see new files created core database files looks pretty good pretty happy with this okay how to use you install your dependencies run migration Migrate to sql.py. Start new app. Okay, and visit those. You'll see the changes. And it says we're Heroku deployment ready, which is good. Security, we have them hashed. Okay, so let's do this. I'm here. I'm going to go ahead and just press control C to end that. And now we're going to do Python web. What's the new one called? Is called web. Enter. Well, now we're going to see. I didn't like that. Let's see. i wonder if i need to install my requirements again uh what was that requirement back to requirements installed python oh pip install yep make sure everything's installed oh and you know what the issue is i'm so stupid you go up here and i did python instead of Python. And then it was saying Flask SQL. That was the first one. And then as I did it later, it said module not found, Flask SQL Alchemy. So I wonder if it was an issue. Yep. Here we go. demo in a unicorn SQL alchemy those things weren't installed in my virtual environment okay so now that we have that now let's try Python web app sql.py that work on how slow it's going it looks like it probably will be database initialized. Sweet. No corpus files found. Perfect. We haven't added any. Okay. This looks good. So let's go ahead and click this. Yeah, interesting. That is problematic because when we did this, let me close these out again because I have two of them open. Let me just click on this again. So I don't know if you notice that but I didn't have got rid of the login because we want to make sure that I have login and it just took me directly here okay so that's problematic because we want to have the login and there is no administration there's no um it lost some of the functionalities of the last one So, what we're going to do is we're going to go back here and say, okay, here is my feedback. When I launched the site, it took me to the chat bot without having to log in. Okay, so I just asked some questions and told to give my feedback. So going back here, it said there's like a slash admin login. So I'm going to just type that out just to see slash admin login. login okay so there's no menu but when I type in admin login I'm able to get here okay and but the problem is I haven't even entered I'm the admin and I haven't even entered in that information quite yet so just a few things that are going on okay so let's see Okay. So then I said here, you're right, the issue is that you still have a session from testing chunk 5 with the old JSON base of that. Let me add a navigation menu to the chat interface to improve the user experience. I'll also add a way to access admin from the main site. Great. We're going to write this command, fix the navigation and whatnot. That's going here. And then hopefully that will work. Perfect. The SEO version is now running. Let me create a quick guide on how to clear your browser session and test it properly. Okay. Sounds good. Quick starts. Requirement text. The testing guide of this. okay yeah do that well that's for the previous one okay the old server stop the first one okay see a login page log in a register test navigation okay so let's give it a try okay that looks like it's running um restarting the it's going to get all this stuff done database initialized this is active okay so let's go ahead and do this open so and this is what we have going on here okay so this was there's the admin login which is great but i haven't created an admin account i suppose and then um let's go back i don't really see any menu do you i don't clear chat okay so there's no login so that's our that's an issue sweet to say okay the admin login is there comma but the issue of having a custom user experience has completely changed. Guests and there is no login for users. I would prefer to have the landing page be the login. Then at the top, there is an option to log in as the admin. I am the only admin that created an account, so how will it allow me to log in? Okay, so now I'm just kind of debugging, fixing things, and kind of see how things go. So it's thinking you're actually right. I changed the flow too much. Let me fix it to match what you want. The landing page should be login for registered user. Option to continue as a guest with the form admin link at the top, not in the main interface. Create your admin account first. Let's fix this now. Okay. So that's going to go ahead and fix this. So this is kind of that process of fixing. So this is great though, right? Because before we had it working really well with this JSON. Now we're migrating over to this SQL Alchemy. And there's been a little bit of a couple bumps in the road. And that's fine. So we just want to get those cleared out. And then once those bumps are all fixed, then we'll be able to um then we'll be able to get to the point where we can deploy it and get things going so uh i guess it's one of this command so this is kind of updating we'll get that going and that should be good and you might be going through this and you might be having similar issues which is great or not fun but great that i can show you how to get through them but if worked, then that's fine. You don't need to continue watching. I'm just going through the debugging process right now and having you kind of watch it. Okay, so this is the changes I've made. I should be able to go. Let me see. The server is still running, so what happens when I just refresh it? Let's just close that out. Let's go back over here. Let's click Control-C to stop now. I've built a few of these different programs in the past and none of them have been 100% smooth. There's always going to be little issues that you're going to be dealing with and that is totally fine. So don't need to worry too much. It just takes time. Okay, here we go. You can see what happened. This is what happened. It did not work. Okay. So now we're going to go ahead and close this out. I am going to stop that and say that didn't work. It took me to the chat again. Once we get this to work, then we'll stop this video and move on to the next one. I think the next video, since we're running out of time on this one, will just be showing you how to access your database that you've just created. So once we get this up and going, then the next video will be like, okay, now that it's up and going, let's access the database. So, I just want to get it working first before I stop the video. These are all the things that we're doing. Updating all these different things. Should work now. The issue browser still has cookies from the old app.py that had a session with user data. The new app doesn't have their user in the SQL database. with the cookie still there. The fix I just added now when you visit the site, it checks if the user from your session actually exists in the SQL database. If not, it clears the session and redirects to login. Try the incognito window. Okay. So let's go ahead and we'll go python web score app underscore sql open it up we'll see if it works first if it doesn't work then we'll go to an incognito window open okay so it looks like there's this um i'm going to go to an incognito window that still didn't work so let's go do it login there we go admin login okay so that works great create an account continue as a guest okay so it was just holding on to my cookies um so then there's the last problem that i think i figured out there so with that i'm going to go back here and i do i'm just going to keep that running actually okay so I say okay that worked there should probably be a logout button so that it requires login every time. Something like that. So now we'll go ahead and add this logout button. Great idea, let me add a logout button to the chat interface. So you can exclusively logout require login the next time okay so now i should be doing this so now let's go back to here if i refresh this there's the logout button there we go okay so that works so um let's go ahead and end the video there and then next video i'll talk to you about accessing the database okay yeah